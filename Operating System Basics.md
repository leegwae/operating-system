# Operating System Basics

## 운영체제란 무엇인가

**운영체제(operating system)**는 소프트웨어로 크게 두 가지 역할을 한다. 첫번째, 복잡한 하드웨어를 추상화하여 그 기능을 응용 프로그램에게 시스템 서비스(system service)의 형태로 제공한다. 시스템 서비스는 운영체제가 제공하는 기능 전반을 뜻하며, 요청과 요청에 대한 서비스 호출로 이루어진다. 두번째, 메모리, I/O 장치와 같은 컴퓨터의 자원을 관리한다. 운영체제는 여러 자원을 사용하기 위해 경쟁하는 프로그램들에게 자원을 분배/할당한다. 프로그램은 자원을 시간 혹은 공간적으로 공유하게 된다.



## CPU의 이중 모드: 운영체제는 다른 소프트웨어와 어떻게 구분되는가

컴퓨터는 CPU, 메모리, I/O 디바이스 등과 이를 연결하는 컨트롤러, 버스 등으로 이루어져있다. **CPU(Central Processing Unit; 중앙처리장치)**는 **프로세서(processor)**라고도 하며 메모리를 읽고 쓰며 프로그램을 실행하는 주체이다. CPU는 **커널(kernel) 모드**와 사용자 모드를 가지는데, 어떤 모드인지는 PSW(Program Status Word)라는 레지스터에 있는 비트에 저장된다. 

운영체제는 커널 모드에서 실행되며 사용자 프로그램들은 사용자 모드에서 실행된다. 커널 모드는 사용자 모드와 달리 **특권 명령(privileged instruction)**을 실행할 수 있으며, 입출력 명령, CPU의 모드(상태)를 설정하는 것, 보호된 메모리에 접근하는 것 등이 여기에 속한다. 운영체제는 사용자 프로그램에 특권 명령을 시스템 호출의 형태로 제공하며, 이것을 시스템 서비스라고 한다.

한편, 사용자 프로그램은 운영체제의 서비스를 사용하기 위해서 **인터럽트(interrupt)** 혹은 트랩(trap)을 걸고 **시스템 호출(system call)**을 요청한다. CPU는 사용자 모드에서 커널 모드로 전환되어 요청을 처리하게 된다. 이는 운영체제만이 직접적으로 하드웨어에 접근할 수 있도록 하기 위해서이다.



## 커널과 쉘

커널은 하드웨어에 직접 접근할 수 있는 유일한 개체로, 시스템 부팅 시 메모리에 적재된다. 사용자 프로그램에게 하드웨어의 기능을 시스템 호출의 형태로 제공한다.

쉘(shell)은 사용자 프로그램과 커널 사이에 위치한 인터페이스이다. 사용자가 입력한 명령어를 해석하여 커널에게 전달하며, 커널이 수행한 명령의 결과를 사용자에게 전달한다.



## 스터디

### 운영체제의 역할에 대해 아는대로 말해보세요

1. (스터디) 프로세스 스케줄링. 어떤 프로세스에게 CPU 자원을 할당할지 결정한다. 메모리 관리. 어떤 프로세스에게 메모리를 얼마나 할당할지 결정한다. 디스크 파일 관리. 파일을 효율적으로 저장하도록 관리하다. 디바이스 관리. 외부 디바이스와 컴퓨터가 데이터를 주고받는 것을 관리한다.
2. 운영체제는 하드웨어를 추상화하여 응용 프로그램에게 제공하고 메모리, I/O 디바이스와 같은 컴퓨터 자원을 관리하여 프로그램에게 할당 및 분배한다.

### CPU의 이중 모드에 대해 설명해주세요

CPU는 커널 모드와 사용자 모드를 가진다. 운영체제는 커널 모드에서, 사용자 프로그램은 사용자 모드에서 실행된다.

### 이중 모드가 필요한 이유는?

사용자로부터 시스템을 보호하기 위해서이다. 악의적인 사용자 프로그램이 다른 사용자 프로그램을 종료시키거나, 자신에게 할당되지 않은 메모리에 접근하는 것을 막는다.